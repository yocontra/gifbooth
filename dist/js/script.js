!function e(t,r,n){function o(i,s){if(!r[i]){if(!t[i]){var d="function"==typeof require&&require;if(!s&&d)return d(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return o(r?r:e)},u,u.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({"./src/js/index.js":[function(e){var t=e("./components/Application"),r=io.connect(),n=t({socket:r});React.renderComponent(n,document.body)},{"./components/Application":"/Users/contra/Projects/gifbooth/src/js/components/Application/index.js"}],"/Users/contra/Projects/gifbooth/node_modules/browserify/node_modules/process/browser.js":[function(e,t){function r(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var n=[];if(t){var o=document.createElement("div"),a=new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})});return a.observe(o,{attributes:!0}),function(e){n.length||o.setAttribute("yes","no"),n.push(e)}}return r?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],"/Users/contra/Projects/gifbooth/node_modules/getusermedia/index-browser.js":[function(e,t){var r=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia;t.exports=function(e,t){var n,o=2===arguments.length,a={video:!0,audio:!0},i="PermissionDeniedError",s="ConstraintNotSatisfiedError";return o||(t=e,e=a),r?(localStorage&&"true"===localStorage.useFirefoxFakeDevice&&(e.fake=!0),void r.call(window.navigator,e,function(e){t(null,e)},function(e){var r;"string"==typeof e?(r=new Error("MediaStreamError"),r.name=e===i?i:s):(r=e,r.name||(e.name=r[i]?i:s)),t(r)})):(n=new Error("MediaStreamError"),n.name="NotSupportedError",t(n))}},{}],"/Users/contra/Projects/gifbooth/node_modules/raf/index.js":[function(e,t){for(var r=e("performance-now"),n="undefined"==typeof window?{}:window,o=["moz","webkit"],a="AnimationFrame",i=n["request"+a],s=n["cancel"+a]||n["cancelRequest"+a],d=!0,c=0;c<o.length&&!i;c++)i=n[o[c]+"Request"+a],s=n[o[c]+"Cancel"+a]||n[o[c]+"CancelRequest"+a];if(!i||!s){d=!1;var u=0,f=0,p=[],l=1e3/60;i=function(e){if(0===p.length){var t=r(),n=Math.max(0,l-(t-u));u=n+t,setTimeout(function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(r){setTimeout(function(){throw r},0)}},Math.round(n))}return p.push({handle:++f,callback:e,cancelled:!1}),f},s=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}t.exports=function(e){return d?i.call(n,function(){try{e.apply(this,arguments)}catch(t){setTimeout(function(){throw t},0)}}):i.call(n,e)},t.exports.cancel=function(){s.apply(n,arguments)}},{"performance-now":"/Users/contra/Projects/gifbooth/node_modules/raf/node_modules/performance-now/lib/performance-now.js"}],"/Users/contra/Projects/gifbooth/node_modules/raf/node_modules/performance-now/lib/performance-now.js":[function(e,t){(function(e){(function(){var r,n,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-o)/1e6},n=e.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},o=r()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:"/Users/contra/Projects/gifbooth/node_modules/browserify/node_modules/process/browser.js"}],"/Users/contra/Projects/gifbooth/node_modules/whammy/whammy.js":[function(e,t){(function(e,r){r.Whammy=function(){function e(e,r){for(var n=t(e),o=3e4,i=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:u(n.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:n.width,id:176},{data:n.height,id:186}]}]}]}]}],d=0,c=0;d<e.length;){var f=[],p=0;do f.push(e[d]),p+=e[d].duration,d++;while(d<e.length&&o>p);var l=0,m={id:524531317,data:[{data:c,id:231}].concat(f.map(function(e){var t=s({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(l)});return l+=e.duration,{data:t,id:163}}))};i[1].data.push(m),c+=p}return a(i,r)}function t(e){for(var t=e[0].width,r=e[0].height,n=e[0].duration,o=1;o<e.length;o++){if(e[o].width!=t)throw"Frame "+(o+1)+" has a different width";if(e[o].height!=r)throw"Frame "+(o+1)+" has a different height";if(e[o].duration<0||e[o].duration>32767)throw"Frame "+(o+1)+" has a weird duration (must be between 0 and 32767)";n+=e[o].duration}return{duration:n,width:t,height:r}}function r(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function n(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function o(e){var t=[],r=e.length%8?new Array(9-e.length%8).join("0"):"";e=r+e;for(var n=0;n<e.length;n+=8)t.push(parseInt(e.substr(n,8),2));return new Uint8Array(t)}function a(e,t){for(var s=[],d=0;d<e.length;d++){var c=e[d].data;if("object"==typeof c&&(c=a(c,t)),"number"==typeof c&&(c=o(c.toString(2))),"string"==typeof c&&(c=n(c)),c.length);var u=c.size||c.byteLength||c.length,f=Math.ceil(Math.ceil(Math.log(u)/Math.log(2))/8),p=u.toString(2),l=new Array(7*f+7+1-p.length).join("0")+p,m=new Array(f).join("0")+"1"+l;s.push(r(e[d].id)),s.push(o(m)),s.push(c)}if(t){var h=i(s);return new Uint8Array(h)}return new Blob(s,{type:"video/webm"})}function i(e,t){null==t&&(t=[]);for(var r=0;r<e.length;r++)"object"==typeof e[r]?i(e[r],t):t.push(e[r]);return t}function s(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),e.trackNum>127)throw"TrackNumber > 127 not supported";var r=[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map(function(e){return String.fromCharCode(e)}).join("")+e.frame;return r}function d(e){for(var t=e.RIFF[0].WEBP[0],r=t.indexOf("Â*"),n=0,o=[];4>n;n++)o[n]=t.charCodeAt(r+3+n);var a,i,s,d,c;return c=o[1]<<8|o[0],a=16383&c,i=c>>14,c=o[3]<<8|o[2],s=16383&c,d=c>>14,{width:a,height:s,data:t,riff:e}}function c(e){for(var t=0,r={};t<e.length;){var n=e.substr(t,4),o=parseInt(e.substr(t+4,4).split("").map(function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t}).join(""),2),a=e.substr(t+4+4,o);t+=8+o,r[n]=r[n]||[],r[n].push("RIFF"==n||"LIST"==n?c(a):a)}return r}function u(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")}function f(e,t){this.frames=[],this.duration=1e3/e,this.quality=t||.8}return f.prototype.add=function(e,t){if("undefined"!=typeof t&&this.duration)throw"you can't pass a duration if the fps is set";if("undefined"==typeof t&&!this.duration)throw"if you don't have the fps set, you ned to have durations here.";if("canvas"in e&&(e=e.canvas),"toDataURL"in e)e=e.toDataURL("image/webp",this.quality);else if("string"!=typeof e)throw"frame must be a a HTMLCanvasElement, a CanvasRenderingContext2D or a DataURI formatted string";if(!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},f.prototype.compile=function(t){return new e(this.frames.map(function(e){var t=d(c(atob(e.image.slice(23))));return t.duration=e.duration,t}),t)},{Video:f,fromImageArray:function(t,r,n){return e(t.map(function(e){var t=d(c(atob(e.slice(23))));return t.duration=1e3/r,t}),n)},toWebM:e}}(),"undefined"!=typeof e&&(t.exports=Whammy)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:"/Users/contra/Projects/gifbooth/node_modules/browserify/node_modules/process/browser.js"}],"/Users/contra/Projects/gifbooth/src/js/components/Application/index.js":[function(e,t){var r=e("../BottomBar"),n=e("../ChatMessage"),o=React.createClass({displayName:"Application",propTypes:{socket:React.PropTypes.object.isRequired},getInitialState:function(){return{messages:[]}},componentWillMount:function(){this.props.socket.on("message",this.addMessage)},addMessage:function(e){var t=this.state.messages;t.unshift({key:e.video,id:e.video,text:e.text,url:"/video/"+e.video}),this.setState({messages:t})},sendMessage:function(e,t){var r=new FormData;r.append("text",e),r.append("video",t);var n=new XMLHttpRequest;n.open("POST","/upload",!0),n.send(r)},render:function(){var e=r({ref:"bottomBar",key:"bottomBar",recordTime:4e3,onSubmit:this.sendMessage}),t=React.DOM.div({className:"message-wall",key:"messageWall",ref:"messageWall"},this.state.messages.map(n)),o=React.DOM.div({className:"application"},[t,e]);return o}});t.exports=o},{"../BottomBar":"/Users/contra/Projects/gifbooth/src/js/components/BottomBar/index.js","../ChatMessage":"/Users/contra/Projects/gifbooth/src/js/components/ChatMessage/index.js"}],"/Users/contra/Projects/gifbooth/src/js/components/BottomBar/index.js":[function(e,t){var r=e("../CaptureMedia"),n=React.createClass({mixins:[React.addons.LinkedStateMixin],displayName:"BottomBar",propTypes:{recordTime:React.PropTypes.number.isRequired,onSubmit:React.PropTypes.func.isRequired},getInitialState:function(){return{locked:!0}},submit:function(){this.setState({locked:!0});var e=this.state.text;this.refs.selfie.record(this.props.recordTime,function(t){this.props.onSubmit(e,t),this.setState({locked:!1,text:""})}.bind(this))},handleKeyPress:function(e){13===e.which&&this.submit()},hasStream:function(){this.setState({locked:!1})},render:function(){if(!window.chrome)return null;var e=r({ref:"selfie",key:"selfie",className:"bottom-bar-selfie",onStream:this.hasStream}),t=React.DOM.input({ref:"txt",key:"txt",placeholder:"Type a message...",onKeyPress:this.handleKeyPress,disabled:this.state.locked,className:"bottom-bar-text",valueLink:this.linkState("text")});return React.DOM.div({ref:"container",className:"bottom-bar"},[e,t])}});t.exports=n},{"../CaptureMedia":"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/index.js"}],"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/index.js":[function(e,t){var r=e("getusermedia"),n=e("./record"),o=React.createClass({displayName:"CaptureMedia",propTypes:{onStream:React.PropTypes.func},getInitialState:function(){return{stream:null,src:null}},componentWillMount:function(){r({video:!0,audio:!1},this.handleGUM)},handleGUM:function(e,t){return t?(this.setState({stream:t,src:URL.createObjectURL(t)}),void(this.props.onStream&&this.props.onStream(t))):console.error(e)},record:function(e,t){n(this.refs.videoElement.getDOMNode(),e,t)},render:function(){return React.DOM.video({ref:"videoElement",src:this.state.src,muted:!0,autoPlay:!0,className:this.props.className,style:this.props.style})}});t.exports=o},{"./record":"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/record.js",getusermedia:"/Users/contra/Projects/gifbooth/node_modules/getusermedia/index-browser.js"}],"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/record.js":[function(e,t){var r=e("whammy"),n=e("raf"),o=document.createElement("video"),a=document.createElement("canvas");t.exports=function(e,t,i){var s=new r.Video(30,1),d=e.videoWidth,c=e.videoHeight;a.width=d,a.height=c,o.width=d,o.height=c,o.src=e.src;var u=a.getContext("2d"),f=Date.now(),p=function(){var e=Date.now()-f;return e>=t?l():(n(p),u.drawImage(o,0,0,d,c),void s.add(u))},l=function(){var e=s.compile();o.src="",o.pause(),o.removeEventListener("playing",p,!1),i(e)};o.addEventListener("playing",p,!1),o.play()}},{raf:"/Users/contra/Projects/gifbooth/node_modules/raf/index.js",whammy:"/Users/contra/Projects/gifbooth/node_modules/whammy/whammy.js"}],"/Users/contra/Projects/gifbooth/src/js/components/ChatMessage/index.js":[function(e,t){var r=React.createClass({displayName:"ChatMessage",propTypes:{id:React.PropTypes.string.isRequired,url:React.PropTypes.string.isRequired,text:React.PropTypes.string},getDefaultProps:function(){return{text:""}},render:function(){var e=React.DOM.img({ref:"video",key:"video",src:this.props.url,loop:!0,controls:!1,autoPlay:!0,className:"chat-message-video"}),t=this.props.text?React.DOM.div({ref:"text",key:"text",className:"chat-message-text"},this.props.text):null;return React.DOM.div({ref:"container",className:"chat-message"},[e,t])}});t.exports=r},{}]},{},["./src/js/index.js"]);
//# sourceMappingURL=dist/js/maps/script.js.map